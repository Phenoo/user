# Google Meet Integration Setup

This document explains how to set up the Google Meet integration for the student app.

## Prerequisites

1. A Google Cloud Platform account
2. A Google Cloud Project with the following APIs enabled:
   - Google Calendar API
   - Google Meet API (if available)

## Setup Steps

### 1. Create a Google Cloud Project

1. Go to the [Google Cloud Console](https://console.cloud.google.com/)
2. Create a new project or select an existing one
3. Enable the required APIs:
   - Go to "APIs & Services" > "Library"
   - Search for "Google Calendar API" and enable it
   - Search for "Google Meet API" (if available) and enable it

### 2. Create OAuth 2.0 Credentials

1. Go to "APIs & Services" > "Credentials"
2. Click "Create Credentials" > "OAuth 2.0 Client IDs"
3. Choose "Web application" as the application type
4. Add authorized redirect URIs:
   - For development: `http://localhost:3000/api/google-meet/callback`
   - For production: `https://yourdomain.com/api/google-meet/callback`
5. Copy the Client ID and Client Secret

### 3. Configure Environment Variables

Add the following environment variables to your `.env.local` file:

```bash
# Google OAuth Configuration
NEXT_PUBLIC_GOOGLE_CLIENT_ID=your_google_client_id_here
GOOGLE_CLIENT_SECRET=your_google_client_secret_here
NEXT_PUBLIC_GOOGLE_REDIRECT_URI=http://localhost:3000/api/google-meet/callback

# App URL (for production)
NEXT_PUBLIC_APP_URL=http://localhost:3000
```

For production, update the URLs accordingly:

```bash
NEXT_PUBLIC_GOOGLE_REDIRECT_URI=https://yourdomain.com/api/google-meet/callback
NEXT_PUBLIC_APP_URL=https://yourdomain.com
```

### 4. OAuth Scopes

The integration requires the following OAuth scopes:

- `https://www.googleapis.com/auth/calendar` - For creating calendar events
- `https://www.googleapis.com/auth/calendar.events` - For managing calendar events and conference data

Note: These scopes allow the application to create Google Meet links automatically when creating calendar events. The Google Meet links are generated by setting `conferenceDataVersion=1` in the Calendar API request.

### 5. Restart Your Development Server

After adding the environment variables, restart your Next.js development server:

```bash
npm run dev
# or
yarn dev
```

## Features

The Google Meet integration provides:

- **OAuth Authentication**: Secure Google account connection
- **Meeting Creation**: Create Google Meet meetings with calendar integration
- **Meeting Management**: Schedule meetings with attendees, descriptions, and time slots
- **Calendar Integration**: Meetings are automatically added to Google Calendar
- **Meeting Links**: Direct links to join Google Meet sessions

## API Endpoints

The integration includes the following API endpoints:

- `GET /api/google-meet/auth` - Get OAuth authorization URL
- `POST /api/google-meet/auth` - Exchange authorization code for access token
- `GET /api/google-meet/callback` - Handle OAuth callback
- `POST /api/google-meet/create` - Create a new Google Meet meeting
- `GET /api/google-meet/meetings` - Get upcoming meetings

## Usage

1. **Authentication**: Click "Connect Google Account" to authenticate with Google
2. **Create Meeting**: Fill out the meeting form with title, description, time, and attendees
3. **Join Meeting**: Click the meeting link to join the Google Meet session

## Troubleshooting

### Common Issues

1. **"Invalid redirect URI" error**: Make sure the redirect URI in your Google Cloud Console matches the one in your environment variables
2. **"Access denied" error**: Check that the required OAuth scopes are properly configured in your code
3. **"API not enabled" error**: Ensure the Google Calendar API is enabled in your Google Cloud project
4. **"No conference data in response" error**: This means the Google Meet link wasn't created. Make sure:
   - The Calendar API is enabled in Google Cloud Console
   - You're using `conferenceDataVersion=1` in the API request (already handled in the code)
   - The OAuth scopes include both `calendar` and `calendar.events`
5. **Meeting created but no Google Meet link**: Double check that you have the Google Calendar API enabled and that your OAuth consent screen is properly configured

### Debug Mode

To debug OAuth issues, check the browser console and network tab for error messages.

## Security Notes

- Never commit your `.env.local` file to version control
- Use environment variables for all sensitive configuration
- Regularly rotate your OAuth credentials
- Monitor API usage in the Google Cloud Console
